/*
 Copyright (c) 2015, Ben Schulz
 License: BSD 3-clause (http://opensource.org/licenses/BSD-3-Clause)
*/
function q(n){var r=function(l){var g=function(c){return function(d,a){return c.b.extend(d,{get stringifyable(){return a()}})}}(l);var c=function(c,d){function a(){return 0}function b(a,b){return"string"===typeof a&&"string"===typeof b?a.localeCompare(b):a<=b?a<b?-1:0:1}function k(a,b){return c.b.extend(a,{get onResultOf(){return this.i},get reverse(){return this.reverse},get callable(){return this.m}},{get i(){return function(b){return f(b,a)}},get reverse(){return function(){return b||p(a)}},get m(){return a}})}
function f(a,b){function m(m,f){return b(a(m),a(f))}k(m);d(m,function(){return{type:"by-function-comparator","function":a.stringifyable,comparator:b.stringifyable}});return m}function p(a){function b(b,f){return-a(b,f)}k(b,a);d(b,function(){return{type:"reversed-comparator",comparator:a.stringifyable}});return b}k(b);d(b,function(){return{type:"natural-comparator"}});k(a);d(a,function(){return{type:"indifferent-comparator"}});return{X:a,M:b}}(l,g);var e=function(c,d){function a(a){return c.b.extend(a,
{get callable(){return this.m}},{get m(){return a}})}return{C:function(b){function c(a){return-1==b.indexOf(".")?a[b]:eval("owner."+b)}a(c);d(c,function(){return{type:"property-accessor",propertyName:b}});return c}}}(l,g);l=function(c,d){function a(){return!0}function b(){return!1}function k(a,b){return c.b.extend(a,{get and(){return this.and},get negate(){return this.B},get onResultOf(){return this.i},get or(){return this.or},get callable(){return this.m}},{get and(){return function(b){return f([a,
b])}},get B(){return function(){return b||e(a)}},get i(){return function(b){return p(b,a)}},get or(){return function(b){return g([a,b])}},get m(){return a}})}function f(b){function c(a){for(var c=0,m=b.length;c<m;++c)if(!b[c](a))return!1;return!0}if(!b.length)return a;k(c);d(c,function(){return{type:"and-predicate",components:b.map(function(a){return a.stringifyable})}});return c}function p(a,b){function c(c){return b(a(c))}k(c);d(c,function(){return{type:"by-function-predicate","function":a.stringifyable,
predicate:b.stringifyable}});return c}function e(a){function b(b){return!a(b)}k(b,a);d(b,function(){return{type:"negated-predicate",predicate:a.stringifyable}});return b}function g(a){function c(b){for(var c=0,f=a.length;c<f;++c)if(a[c](b))return!0;return!1}if(!a.length)return b;k(c);d(c,function(){return{type:"or-predicate",components:a.map(function(a){return a.stringifyable})}});return c}k(b);d(b,function(){return{type:"always-false-predicate"}});k(a);d(a,function(){return{type:"always-true-predicate"}});
return{U:b,V:a,and:f,from:function(a,b){function c(b){return a(b)}k(c);d(c,b);return c},or:g,N:function(a){function b(b){return a.test(b)}k(b);d(b,function(){return{type:"regular-expression-predicate",regularExpression:a.source,caseSensitive:!a.ignoreCase,multiline:a.multiline}});return b}}}(l,g);return{g:c,o:e,predicates:l,A:g,S:function(c,d){return"function"===typeof d||"object"===typeof d?d.stringifyable||d:d}}}(function(){var l=function(){function g(c,e){return Object.prototype.hasOwnProperty.call(c,
e)}return{F:function(c,e){if(c===e)return!0;var g=!!e&&"function"===typeof e.valueOf;return!!c&&"function"===typeof c.valueOf&&g&&c.valueOf()===e.valueOf()},extend:function(c,g){Array.prototype.slice.call(arguments,1).forEach(function(g){for(var d=Object.keys(g),a=0,b=d.length;a<b;a++){var k=d[a],f=Object.getOwnPropertyDescriptor(g,k);void 0!==f&&f.enumerable&&Object.defineProperty(c,k,f)}});return c},K:function(c,e){for(var h in c)g(c,h)&&e(h,c[h])},v:g,L:function(c,e){var h={},d;for(d in c)g(c,
d)&&(h[d]=e(c[d],d,c));return h}}}();return function(g,c,e){return{f:g,b:c,s:e}}(function(g){function c(a){return a.filter(function(a,c,f){return f.lastIndexOf(a)===c})}function e(a,b){for(var c=a.length,f=-1,d=0;d<c;++d)if(b(a[d])){if(0<=f)throw Error("Multiple elements match the predicate.");f=d}return f}function h(a,b){return a&&"function"===typeof a.valueOf&&b&&"function"===typeof b.valueOf?a.valueOf()<=b.valueOf()?a.valueOf()<b.valueOf()?-1:0:1:a<=b?a<b?-1:0:1}function d(a,b,c){var f=a.length,
d=Array(f),g=Array(f),e;for(e=0;e<f;++e)d[e]=e,g[e]=a[e];!0===c&&(c=a,a=g,g=c);d.sort(function(c,d){return b(a[c],a[d])||c-d});for(e=0;e<f;++e)g[e]=a[d[e]];return g}return{contains:function(a,b){return 0<=a.indexOf(b)},I:function(a){if(50<a.length){for(var b=a.length,d={},f,e=0;e<b;++e)if(f=a[e],"string"===typeof f)if(g.v(d,f))break;else d[f]=!0;else if(a.lastIndexOf(f)!==e)break;if(!(e>=b)){for(var h=a.slice(0,e);e<b;++e)f=a[e],"string"===typeof f?g.v(d,f)||(d[f]=!0,h.push(f)):a.lastIndexOf(f)===
e&&h.push(f);a=h}}else a=c(a);return a},J:function(a,b){return Array.prototype.concat.apply([],a.map(b))},O:function(a,b){b=e(a,b);if(0>b)throw Error("None of the elements matches the predicate.");return a[b]},P:function(a,b){b=e(a,b);return 0<=b?a[b]:null},R:function(a,b){b=b||h;window.chrome?a=d(a,b,!0):a.sort(b);return a}}}(l),l,{G:function(g){return g.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()})},H:function(g){return g.replace(/-([a-z])/g,function(c){return c[1].toUpperCase()})},
format:function(g){var c=arguments;return g.replace(/{(\d+)}/g,function(e,g){g=parseInt(g,10)+1;return typeof c.length<=g?e:c[g]})}})}());return function(l,g,c){g.defineExtension("ko-grid-sorting",{Constructor:function(e,g,d){function a(a){a===f?(h="ascending"===h?"descending":"ascending",l=l.reverse()):(f&&f.headerClasses.removeAll(["ascending-order","descending-order"]),f=a,h="ascending",l=k(a));a.headerClasses(f.headerClasses().filter(function(a){return"ascending-order"!==a&&"descending-order"!==
a}).concat(["ascending"===h?"ascending-order":"descending-order"]));d.data.comparator(l)}function b(a){return(a=d.data.valueSelector(a))&&"function"===typeof a.valueOf?a.valueOf():a}function k(a){function d(a){return b(-1==e.indexOf(".")?a[e]:eval("row."+e))}var e=a.property;c.A(d,function(){return c.o.C(a.property).stringifyable});return c.g.M.i(d)}var f,h,l;(e=e.initiallyBy)&&a(d.columns.byId(e));d.headers.onColumnHeaderClick(function(b,c){b.defaultPrevented||(b.preventDefault(),a(c.column))});
var n=d.data.comparator.subscribe(function(a){f&&(a!==l&&(f.headerClasses.removeAll(["ascending-order","descending-order"]),f=h=l=null),d.layout.recalculate())});this.dispose=function(){n.dispose()}}});return g.declareExtensionAlias("sorting","ko-grid-sorting")}({},n,r)}"function"===typeof define&&define.amd?define(["ko-grid","ko-data-source","ko-indexed-repeat","knockout"],q):window["ko-grid-sorting"]=q(window.ko.bindingHandlers.grid);